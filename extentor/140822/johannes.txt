Uppgift 1
=========

b)

Kurser(_kurskod_,namn,beskrivning)
Stader(_namn_)
Kurstillfällen(_kursID_,startDatum,antalVeckor,veckodag,tid,avgift,~stad~,~kurskod~,~lärarePersonNummer~)
Studenter(_personNummer_,namn,adress)
Betalt(~_personNummer_~,~_kursID_~, datum)
Lärare(_personNummer_,namn,adrdess)
Föreläsningar(_tillfälle_,längd,~personNummer~,~_kursID_~)

c)
Totala intäkterna för de kurser som getts under 2014 i Lund
Kurskod, kursnamn samt totala intäkter, sorterat efter kurskod

select kurskod,namn,sum(avgift)
from Kurstillfällen, Betalt, Kurser
where Kurstillfällen.startDatum like '2014%'          # år
  and Kurstillfällen.stad == "Lund"                   # stad
  and Betalt.kursID == Kurstillfällen.kursID          # synka Betalt med Kurstillfällen
  and Kurstillfällen.kurskod == Kurser.kurskod        # synka Kurser med Kurstillfällen
  and Betalt.datum is not null
group by kurskod, namn
order by kurskod

Uppgift 2
=========

b)

create Table Treatments (
  patientID         varchar(16),
  bacteriaName      varchar(16),
  antibioticName    varchar(16),
  effect            int check (effect >= 0 and effect <= 10),           #tk
  primary key(patientID,bacteriaName,antibioticName),
  foreign key (patientID) references Patients(id),
  foreign key (bacteriaName) references Bacteria(name),
  foreign key (antibioticName) references Antibiotics(name)
);


c)Namn på antibiotika som inte använts i behandling

select name
from Antibiotics left outer join Treatments on name = antibioticName    #tk
where antibioticName is null;

d)Antal patienter behandlade för bakterie "S.aureus"

select count(distinct patientID)                                        #tk
from Treatments
where bacteriaName == "S.aureus";

e) id, namn och address för patienter med mer än 1 behandling

select id,name,address
from Patients, Treatments
where id in ( select patientID
              from Treatments
              group by patientID
              having count(*)>1);                                       #tk

f) namn och leverantör för antibiotika effektiv (effekt minst 7) mot "S.aureus"

select antibioticName, source
from Antibiotics,Treatments
where bacteriaName = name
  and bacteriaName = "S-aureus"
group by antibioticName,source
having min(effect) >= 7;

